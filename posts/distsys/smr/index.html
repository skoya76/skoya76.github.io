<!doctype html><html lang=jp><head><title>State Machine Replication</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/application.5b7777e57c70f92a6339db87ad8b77d43266b3f01b9b591a1fac1f495003fb3c.css integrity="sha256-W3d35Xxw+SpjOduHrYt31DJms/Abm1kaH6wfSVAD+zw="><link rel=icon type=image/png href=/images/site/kohya_shiozaki_logo_huc0372d1c08dd9f8f37260d4b6e327509_411684_42x0_resize_box_3.png><meta property="og:title" content="State Machine Replication"><meta property="og:description" content="本記事はdev.toから移植しました．
Introduction In computer science, state machine replication (SMR) or state machine approach is a general method for implementing a fault-tolerant service by replicating servers and coordinating client interactions with server replicas. The approach also provides a framework for understanding and designing replication management protocols [Wikipedia].
What is Fault-tolerant? Fault tolerance is simply the property that guarantees the provision of service without problems even if some of the replicated copies break down."><meta property="og:type" content="article"><meta property="og:url" content="https://skoya76.github.io/posts/distsys/smr/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-19T00:00:00+00:00"><meta property="article:modified_time" content="2022-08-19T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="State Machine Replication"><meta name=twitter:description content="本記事はdev.toから移植しました．
Introduction In computer science, state machine replication (SMR) or state machine approach is a general method for implementing a fault-tolerant service by replicating servers and coordinating client interactions with server replicas. The approach also provides a framework for understanding and designing replication management protocols [Wikipedia].
What is Fault-tolerant? Fault tolerance is simply the property that guarantees the provision of service without problems even if some of the replicated copies break down."><meta name=description content="State Machine Replication"><script async src="https://www.googletagmanager.com/gtag/js?id=G-H4LBG7NDFZ"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-H4LBG7NDFZ",{anonymize_ip:!1})}</script></head><body class="type-posts kind-page" data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/images/site/kohya_shiozaki_logo_huc0372d1c08dd9f8f37260d4b6e327509_411684_42x0_resize_box_3.png alt=Logo>
塩崎功也のプロフィール</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=menu-icon-center src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme"></a>
<a class="dropdown-item nav-link" href=# data-scheme=dark><img class=menu-icon-center src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a>
<a class="dropdown-item nav-link" href=# data-scheme=system><img class=menu-icon-center src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div><img src=/images/site/kohya_shiozaki_logo_huc0372d1c08dd9f8f37260d4b6e327509_411684_42x0_resize_box_3.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/kohya_shiozaki_logo_huc0372d1c08dd9f8f37260d4b6e327509_411684_42x0_resize_box_3.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=検索 data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts/ data-filter=all>記事</a></li><div class=subtree><li><a href=/posts/books/ title=Books>Books</a></li><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/distsys/> Distributed Systems</a><ul class=active><li><a href=/posts/distsys/communicationmodels/ title="Communication Models">Communication Models</a></li><li><a href=/posts/distsys/failuremodels/ title="Failure Models">Failure Models</a></li><li><a href=/posts/distsys/timestamp/ title="Lamport Timestamp">Lamport Timestamp</a></li><li><a class=active href=/posts/distsys/smr/ title="State Machine Replication">State Machine Replication</a></li><li><a href=/posts/distsys/tob/ title="Total Order Broadcast">Total Order Broadcast</a></li><li><a href=/posts/distsys/consistencies/ title="Various Consistencies">Various Consistencies</a></li><li><a href=/posts/distsys/multipaxos/ title="What is the MultiPaxos?">What is the MultiPaxos?</a></li><li><a href=/posts/distsys/paxos/ title="What is the Paxos?">What is the Paxos?</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/internship/> Internship</a><ul><li><a href=/posts/internship/kag/ title=KAG>KAG</a></li><li><a href=/posts/internship/rakuten/ title=Rakuten>Rakuten</a></li><li><a href=/posts/internship/toray/ title=Toray>Toray</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/images/default-hero.jpg)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/author/koya_hub4903c7e348867ff40ef2ef6922c64b1_58020_120x120_fit_q75_box.jpeg alt="Author Image"><h5 class=author-name>塩崎 功也（シオザキ コウヤ）</h5><p>Friday, August 19, 2022</p></div><div class=title><h1>State Machine Replication</h1></div><div class=taxonomy-terms><ul style=padding-left:0></ul></div><div class=post-content id=post-content><p>本記事は<a href=https://dev.to/skoya76/total-order-broadcast-5ccl target=_blank rel=noopener>dev.to</a>から移植しました．</p><h2 id=introduction>Introduction</h2><p>In computer science, state machine replication (SMR) or state machine approach is a general method for implementing a <strong>fault-tolerant</strong> service by replicating servers and coordinating client interactions with server replicas. The approach also provides a framework for understanding and designing replication management protocols <a href=https://en.wikipedia.org/wiki/State_machine_replication#State_machine target=_blank rel=noopener>[Wikipedia]</a>.</p><h2 id=what-is-fault-tolerant>What is Fault-tolerant?</h2><p>Fault tolerance is simply the property that guarantees the provision of service without problems even if some of the replicated copies break down.</p><h3 id=type-of-failure>Type of failure</h3><p>There are many reasons why a server may not be able to provide service. For example, human error, natural disasters, and machine failure. These failures are referred to as <strong>Fail-Stop</strong> that simply cannot be serviced.</p><p>Apart from fail stops, there is <strong>Byzantine Failure</strong>. Byzantine failure is easier to understand if you simply imagine that a node has been hijacked. In other words, with a stop failure, if you send a message after the failure, you will not receive a reply (because you did nothing). But with a Byzantine failure, if you message it, it may send you a fake message, or it may ignore you and make it look like it is stopped. Also, multiple Byzantine nodes might cooperate to do bad things.</p><h2 id=how-many-failures-are-tolerated>How many failures are tolerated?</h2><p>First, consider a stop fault. Look at the image below.
<img src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/0hpjhhawyxwzgwuus7l3.png alt=Stop-Failures>
This situation has N=3 and F=1. Node B is stopped. In other words, there is no response when a message is sent to node B. In this case, node A and node C can check with each other to find the correct value. Let&rsquo;s take the idea further. If node A stops, then node C has no way to determine if its value is correct. In other words, if N=3, we know that it will not work well if F more than 1. In summary, the required condition for assuming only stop faults is (N >= 2F + 1).</p><p>Next, we will deal with Byzantine failure. What if node B in the image above is a Byzantine failure? In that case, when node A wants to check the consistency of the values, it checks node B and node C for the values from them. However, node B may send a false message because of a Byzantine fault. In other words, node A cannot determine the value if it receives two different values. This is the same from the standpoint of node C. In other words, assuming Byzantine failure, N=3 and F=1 are not sufficient.</p><p>Look at the image below.</p><p><img src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/139y66aoc63fmcn8w1dn.png alt="Byzantine Failures">
This situation has N=4 and F=1. This situation is also the same, with node B having a Byzantine failure and all other nodes normal. In this case, even if node A receives a false value from the Byzantine node, it can still determine which is the correct value by majority vote if it receives the correct values from the other two normal nodes. In summary, the required condition for assuming Byzantine faults is (N >= 3F + 1).</p><h2 id=state-machine-approach>State machine Approach</h2><p>The following is from <a href=https://en.wikipedia.org/wiki/State_machine_replication#State_machine target=_blank rel=noopener>[Wikipedia]</a>.</p><ol><li>Place copies of the State Machine on multiple, independent servers.</li><li>Receive client requests, interpreted as Inputs to the State Machine.</li><li>Choose an ordering for the Inputs.</li><li>Execute Inputs in the chosen order on each server.</li><li>Respond to clients with the Output from the State Machine.</li><li>Monitor replicas for differences in State or Output.</li></ol><p>Specific examples are shown below. The blue circles indicate the servers (replicas) that make up the state machine replicas. The arrows indicate that an update request occurred to the replicas indicated by the arrows in the order of their numbers.</p><p><img src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/n2xluqfv3jll2do8lhap.png alt="Total order"></p><p>In this case, if the process is successful, all updates will be performed in the same order in all replicas, as shown in the image below.</p><p><img src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/px3em7hjh14x6vk26z2p.png alt="Total order 2"></p><h2 id=comment>Comment</h2><p>In this article, state machine replication was explained. It is easy to imagine that the number of messages exchanged between replicas would be enormous in order for all replicas to perform the update process in the same order. For this reason, research is still being conducted on protocols to reduce the communication cost of state machine replication. Examples include Fast Paxos, EPaxos, and Mencius. Please look forward to my future explanation of these as well.</p><p>Thank you for reading to the end.</p></div><div class="row pl-3 pr-3"><div class="col-md-6 share-buttons"><strong>Share on:</strong>
<a class="btn btn-sm facebook-btn" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fskoya76.github.io%2fposts%2fdistsys%2fsmr%2f" target=_blank><i class="fab fa-facebook"></i></a>
<a class="btn btn-sm twitter-btn" href="https://twitter.com/share?url=https%3a%2f%2fskoya76.github.io%2fposts%2fdistsys%2fsmr%2f&text=State%20Machine%20Replication&via=%e5%a1%a9%e5%b4%8e%e5%8a%9f%e4%b9%9f%e3%81%ae%e3%83%97%e3%83%ad%e3%83%95%e3%82%a3%e3%83%bc%e3%83%ab" target=_blank><i class="fab fa-twitter"></i></a>
<a class="btn btn-sm reddit-btn" href="https://reddit.com/submit?url=https%3a%2f%2fskoya76.github.io%2fposts%2fdistsys%2fsmr%2f&title=State%20Machine%20Replication" target=_blank><i class="fab fa-reddit"></i></a>
<a class="btn btn-sm linkedin-btn" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2fskoya76.github.io%2fposts%2fdistsys%2fsmr%2f&title=State%20Machine%20Replication" target=_blank><i class="fab fa-linkedin"></i></a>
<a class="btn btn-sm whatsapp-btn" href="https://api.whatsapp.com/send?text=State%20Machine%20Replication https%3a%2f%2fskoya76.github.io%2fposts%2fdistsys%2fsmr%2f" target=_blank><i class="fab fa-whatsapp"></i></a>
<a class="btn btn-sm email-btn" href="mailto:?subject=State%20Machine%20Replication&body=https%3a%2f%2fskoya76.github.io%2fposts%2fdistsys%2fsmr%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/skoya76/skoya76.github.io/edit/main/content/posts/distsys/smr/index.md title=編集リクエストを送る target=_blank rel=noopener><i class="fas fa-code-branch"></i>
編集リクエストを送る</a></div></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/distsys/timestamp/ title="Lamport Timestamp" class="btn btn-outline-info"><div><i class="fas fa-chevron-circle-left"></i> 前</div><div class=next-prev-text>Lamport Timestamp</div></a></div><div class="col-md-6 next-article"><a href=/posts/distsys/tob/ title="Total Order Broadcast" class="btn btn-outline-info"><div>次 <i class="fas fa-chevron-circle-right"></i></div><div class=next-prev-text>Total Order Broadcast</div></a></div></div><hr></div></div></div><a id=scroll-to-top class=btn><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">目次</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#what-is-fault-tolerant>What is Fault-tolerant?</a><ul><li><a href=#type-of-failure>Type of failure</a></li></ul></li><li><a href=#how-many-failures-are-tolerated>How many failures are tolerated?</a></li><li><a href=#state-machine-approach>State machine Approach</a></li><li><a href=#comment>Comment</a></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>メニュー</h5><ul><li class=nav-item><a class=smooth-scroll href=https://skoya76.github.io#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://skoya76.github.io#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=https://skoya76.github.io#publications>Research Activities</a></li><li class=nav-item><a class=smooth-scroll href=https://skoya76.github.io#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=https://skoya76.github.io#projects>Projects</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>連絡先</h5><ul><li><a href=mailto:kohya.shiozaki%28at%29gmail.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>kohya.shiozaki(at)gmail.com</span></a></li><li><a href=https://github.com/skoya76 target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>skoya76</span></a></li><li><a href=https://www.linkedin.com/in/www.linkedin.com/in/skoya76 target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>塩崎 功也（シオザキ コウヤ）</span></a></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2020 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>搭載
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.01dd2033d7843641f5cac9d4c9803d3da39e371c7d2c472f89a89105856a7b75.js integrity="sha256-Ad0gM9eENkH1ysnUyYA9PaOeNxx9LEcviaiRBYVqe3U=" defer></script></body></html>